# [과제] 결제 시스템 구축

- 회사는 신규 서비스에 결제 시스템을 구축하려고 합니다. 신규 서비스는 비즈니스 요구사항이 자주 바뀔 수 있습니다. 
- 이를 고려하여 요구사항을 충족하는 것은 물론, 작성하신 코드에 담긴 고민과 의도를 구체적으로 보여주세요.

---

## 1. 과제 수행 방식 및 기한
- **제출 기한:** 과제 수령 후 **3일**
- **수행 방식:** 각 단계는 지정된 Git 브랜치에 작성되어야 합니다.
    - **[Step 1] 기본 요구사항:** `main` 브랜치에 구현
    - **[Step 2] 심화 요구사항:** `feature` 브랜치에 구현 (`main` 브랜치의 코드를 개선 및 확장)

---

## 2. 단계별 요구사항

### A. 기본 요구사항 (Branch: `main`)

**1) 도메인 모델**
- **회원(Member):** 등급(`NORMAL`, `VIP`, `VVIP`) 정보
- **주문(Order):** 상품명, 주문 원가, 회원 정보 포함

**2) 할인 및 혜택**
- 회원 등급에 따라 차등 할인 적용, 정책은 수시로 추가/변경 가능
- **VIP:** 1,000원 고정 금액 할인
- **VVIP:** 주문 금액의 10% 할인

**3) 결제**
- **결제 수단:** `신용카드`, `포인트` 중 선택 가능
- **결제 저장:** 성공 시 주문 정보, 최종 결제 금액, 결제 수단, 결제 일시를 기록

**4) 테스트**
- **유닛 테스트:** 각 회원 등급별 할인 로직 검증

---

### B. 추가 요구사항 - 가산점 (Branch: `feature`)

**1) 이력 관리**
- 할인 정책은 운영상 짧은 주기로 자주 변경
- 결제 완료 주문은 적용된 할인(등급, 적용 정책명, 할인율, 할인 금액 등)을 데이터베이스에 기록
- 시스템 정책 수정/삭제 후 과거 결제 데이터와 이력 보존

**2) 중복 할인**
- 특정 결제 수단 선택 시 추가 중복 할인을 적용
- `포인트` 결제 시, 최종 금액에서 추가 5%를 중복 할인

**3) 테스트**
- **유닛 테스트:** 등급 할인과 결제 수단 할인이 중복 적용될 때의 우선순위 및 최종 금액을 검증
- **데이터 정합성 테스트:** 정책 수정/삭제 후 과거 결제 데이터와 이력 보존 여부 검증

---

## 3. 기술 제약 및 평가 기준

### A. 기술 스택
- **Language:** JVM 17 이상
- **Framework:** Spring Boot 3.x
- **DB:** H2 Database (In-memory)
- **Library:** Lombok, JUnit5

### B. 평가 기준
1. **Architecture (50%):** 유연한 설계, 데이터 불변성 및 이력 관리 전략, 예외 처리 설계
2. **Clean Code (30%):** 가독성, 네이밍, 객체 책임 분리
3. **Completeness (20%):** 요구사항 충족 정도 및 테스트 케이스의 논리적 완결성

---

## 4. 제출 및 README 작성 안내

**1) 제출 방법**
- GitHub Public 레포지토리 생성 후 링크 제출

**2) README 필수 기재 사항**
- 프로젝트 진행 과정에서 중요하게 생각한 부분을 구체적으로 서술해주세요.
- `main`에서 `feature` 브랜치로 넘어가며 설계를 변경하거나 개선했다면, 그에 대한 논리적 근거를 작성해주세요.